<html>
    <head>
      <script src="./gml2d.js" type="text/javascript"></script>
      <title>Convex Hull Inspector</title>
    </head>
    <body onload="init()">
    <script type="text/javascript">
        var canvas;
        var context;
        var points;
        var poly;

        function init() {
            canvas = document.getElementById( "viewport" );
            context = canvas.getContext( '2d' );

            var POINTS_TO_PLOT = 30;
            points = [];
            for ( var i = 0; i < POINTS_TO_PLOT; i++ ) {
                points.push( new gml2d.Vec2( Math.random() * canvas.width, Math.random() * canvas.height ) );
            }

            computeHull( points )
            visualizePoly( poly );
        }

        function computeHull( points ) {
            poly = gml2d.ConvexHull( points );
        }

        function visualizePoly( poly ) {
            context.beginPath();
            context.moveTo( poly.points[0].x, poly.points[0].y );
            context.lineWidth = 1;
            context.fillStyle = gml2d.convex( poly ) ? 'green' : 'red';

            for ( var i = 0; i < poly.points.length; i++ ) {
                var p = poly.points[ (i+1) % poly.points.length ];
                context.lineTo( p.x, p.y );
            }

            context.fill();
            context.stroke();
        }
    </script>
    <div role="main" id="maincolumn">
      <center>
        <div id="screen">
          <canvas id="viewport" height="500" width="500">
          </canvas>
        </div>
      </center>
    </div>
    </body>
</html>
